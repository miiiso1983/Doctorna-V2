# دليل الواجهات المتعددة (Multi-Role Guide)

## 📋 نظرة عامة

تم إعادة هيكلة التطبيق ليدعم **3 واجهات منفصلة** بناءً على دور المستخدم:

1. **واجهة السوبر أدمن** (Super Admin Dashboard)
2. **واجهة الطبيب** (Doctor Dashboard)
3. **واجهة المريض** (Patient Dashboard)

---

## 🎯 الأدوار المتاحة

### 1️⃣ **السوبر أدمن** (`super_admin`)
- **الوصف:** مدير النظام الكامل
- **الصلاحيات:**
  - إدارة جميع الأطباء (إضافة، تعديل، حذف، تفعيل)
  - إدارة جميع المرضى
  - إدارة جميع المواعيد
  - إدارة المنشورات الصحية
  - عرض الإحصائيات الكاملة
  - إدارة التخصصات الطبية

### 2️⃣ **الطبيب** (`doctor`)
- **الوصف:** طبيب مسجل في النظام
- **الصلاحيات:**
  - عرض وإدارة مواعيده الخاصة
  - عرض قائمة مرضاه
  - إنشاء وإدارة المنشورات الصحية
  - عرض التقييمات والمراجعات
  - تحديث ملفه الشخصي
  - الدردشة مع المرضى
  - إجراء مكالمات فيديو

### 3️⃣ **المريض** (`patient`)
- **الوصف:** مريض يبحث عن طبيب
- **الصلاحيات:**
  - البحث عن الأطباء
  - حجز المواعيد
  - عرض مواعيده
  - قراءة المنشورات الصحية
  - تقييم الأطباء
  - الدردشة مع الأطباء
  - إجراء مكالمات فيديو

---

## 🔐 تسجيل الدخول (Mock Login)

### كيفية تسجيل الدخول بأدوار مختلفة:

التطبيق حالياً يستخدم **Mock Login** للتطوير. يتم تحديد الدور بناءً على البريد الإلكتروني:

#### **1. تسجيل دخول كسوبر أدمن:**
```
Email: admin@doctorna.com
Password: أي كلمة مرور
```
- سيتم توجيهك إلى **لوحة تحكم المدير**
- الاسم: "مدير النظام"
- الدور: `super_admin`

#### **2. تسجيل دخول كطبيب:**
```
Email: doctor@doctorna.com
أو
Email: dr.ahmed@doctorna.com
Password: أي كلمة مرور
```
- سيتم توجيهك إلى **لوحة تحكم الطبيب**
- الاسم: "د. أحمد محمود"
- الدور: `doctor`

#### **3. تسجيل دخول كمريض:**
```
Email: patient@doctorna.com
أو
Email: أي email آخر
Password: أي كلمة مرور
```
- سيتم توجيهك إلى **الشاشة الرئيسية للمريض**
- الاسم: "مريض تجريبي"
- الدور: `patient`

---

## 📱 الواجهات

### 1️⃣ **واجهة السوبر أدمن**

**الملف:** `lib/screens/admin/admin_dashboard_screen.dart`

**الأقسام:**
- 🏠 **الرئيسية:** Dashboard مع إحصائيات (عدد الأطباء، المرضى، المواعيد، المنشورات)
- 👨‍⚕️ **الأطباء:** إدارة الأطباء (عرض، إضافة، تعديل، حذف)
- 👥 **المرضى:** إدارة المرضى
- 📅 **المواعيد:** إدارة جميع المواعيد
- 📰 **المنشورات:** إدارة المنشورات الصحية
- 👤 **الملف الشخصي:** معلومات المدير وتسجيل الخروج

**الميزات:**
- ✅ عرض إحصائيات شاملة
- ✅ بحث وفلترة الأطباء
- ✅ إضافة طبيب جديد
- ✅ عرض المواعيد الأخيرة
- ✅ واجهة نظيفة وسهلة الاستخدام

---

### 2️⃣ **واجهة الطبيب**

**الملف:** `lib/screens/doctor/doctor_dashboard_screen.dart`

**الأقسام:**
- 🏠 **الرئيسية:** Dashboard مع إحصائيات (مواعيد اليوم، المرضى، التقييمات، المنشورات)
- 📅 **المواعيد:** عرض وإدارة المواعيد (قيد الانتظار، مؤكدة، مكتملة)
- 👥 **المرضى:** قائمة المرضى مع البحث
- 📰 **المنشورات:** منشورات الطبيب الصحية
- 👤 **الملف الشخصي:** معلومات الطبيب وتسجيل الخروج

**الميزات:**
- ✅ عرض مواعيد اليوم
- ✅ تأكيد أو إلغاء المواعيد
- ✅ فلترة المواعيد حسب الحالة
- ✅ البحث عن المرضى
- ✅ عرض آخر زيارة لكل مريض

---

### 3️⃣ **واجهة المريض**

**الملف:** `lib/screens/patient/patient_dashboard_screen.dart`

**الأقسام:**
- 🏠 **الرئيسية:** الشاشة الرئيسية مع البحث والتخصصات
- 👨‍⚕️ **الأطباء:** قائمة الأطباء مع البحث والفلترة
- 📅 **مواعيدي:** مواعيد المريض
- 📰 **المنشورات:** المنشورات الصحية
- 👤 **الملف الشخصي:** معلومات المريض وتسجيل الخروج

**الميزات:**
- ✅ البحث عن الأطباء
- ✅ حجز المواعيد
- ✅ عرض المواعيد القادمة
- ✅ قراءة المنشورات الصحية
- ✅ تقييم الأطباء

---

## 🔄 نظام التوجيه (Role Router)

**الملف:** `lib/utils/role_router.dart`

### الوظائف المتاحة:

```dart
// الحصول على Dashboard المناسب للمستخدم
Widget dashboard = RoleRouter.getDashboardForRole(user);

// التحقق من دور المستخدم
bool isAdmin = RoleRouter.isAdmin(user);
bool isDoctor = RoleRouter.isDoctor(user);
bool isPatient = RoleRouter.isPatient(user);

// الحصول على اسم الدور بالعربية
String roleName = RoleRouter.getRoleDisplayName('doctor'); // "طبيب"

// الحصول على أيقونة الدور
IconData icon = RoleRouter.getRoleIcon('doctor'); // Icons.medical_services

// الحصول على لون الدور
Color color = RoleRouter.getRoleColor('doctor'); // Colors.blue
```

---

## 🎨 البنية الجديدة

```
lib/
├── screens/
│   ├── admin/
│   │   └── admin_dashboard_screen.dart       ✅ واجهة السوبر أدمن
│   ├── doctor/
│   │   └── doctor_dashboard_screen.dart      ✅ واجهة الطبيب
│   ├── patient/
│   │   └── patient_dashboard_screen.dart     ✅ واجهة المريض
│   ├── auth/
│   │   ├── login_screen.dart                 ✅ محدثة للتوجيه
│   │   └── register_screen.dart
│   └── ... (باقي الشاشات المشتركة)
├── utils/
│   └── role_router.dart                      ✅ نظام التوجيه
└── main.dart                                 ✅ محدث للتوجيه التلقائي
```

---

## 🚀 كيفية الاستخدام

### 1. **تشغيل التطبيق:**
```bash
cd tabibak_app
flutter run -d chrome
```

### 2. **تسجيل الدخول:**
- استخدم أحد البريدات الإلكترونية المذكورة أعلاه
- أدخل أي كلمة مرور
- سيتم توجيهك تلقائياً للواجهة المناسبة

### 3. **التبديل بين الأدوار:**
- سجل الخروج من الواجهة الحالية
- سجل الدخول ببريد إلكتروني مختلف
- سيتم توجيهك للواجهة الجديدة

---

## 📊 الميزات المكتملة

### ✅ **تم الانتهاء:**
- [x] إعادة هيكلة التطبيق لـ 3 واجهات
- [x] إنشاء واجهة السوبر أدمن
- [x] إنشاء واجهة الطبيب
- [x] إنشاء واجهة المريض
- [x] نظام التوجيه التلقائي
- [x] Mock Login مع دعم الأدوار
- [x] تحديث شاشة تسجيل الدخول
- [x] تحديث Splash Screen

### 🔄 **قيد التطوير:**
- [ ] إكمال شاشات إدارة الأطباء (Admin)
- [ ] إكمال شاشات إدارة المرضى (Admin)
- [ ] إكمال شاشات إدارة المواعيد (Admin)
- [ ] إكمال شاشات المنشورات (Doctor)
- [ ] إضافة إحصائيات تفصيلية
- [ ] تكامل مع API الحقيقي

---

## 🎯 الخطوات التالية

1. **اختبار جميع الواجهات:**
   - تسجيل دخول كسوبر أدمن
   - تسجيل دخول كطبيب
   - تسجيل دخول كمريض

2. **إكمال الشاشات:**
   - إضافة شاشات إدارة كاملة للسوبر أدمن
   - إضافة شاشات إدارة المواعيد للطبيب
   - إضافة شاشات المنشورات للطبيب

3. **تكامل API:**
   - ربط الواجهات بالـ API الحقيقي
   - إضافة صلاحيات حقيقية
   - تأمين الـ Endpoints

---

**آخر تحديث:** 2024-12-23  
**الإصدار:** 2.0.0 (Multi-Role Support)

